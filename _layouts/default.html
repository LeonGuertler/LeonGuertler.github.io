<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>{{ page.title | default: site.title }}</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="stylesheet" href="{{ "/assets/css/style.css" | relative_url }}">
  </head>

  <body>
    <header>
      <h1 style="margin:1.5rem 0;">
        <a href="{{ "/" | relative_url }}"
           style="text-decoration:none;color:inherit;">
          {{ site.title }}
        </a>
      </h1>
    </header>

    <main>
      {{ content }}
    </main>

    <script>
      document.addEventListener('DOMContentLoaded', () => {
        document.querySelectorAll('pre > code').forEach(code => {
          const pre     = code.parentNode;              // <pre>
          const wrapper = document.createElement('div');
          wrapper.className = 'code-wrapper';
      
          /* ðŸ”„  instead of   pre.parentNode.parentNode.replaceWith(wrapper)  */
          pre.parentNode.insertBefore(wrapper, pre);    // insert wrapper *before* <pre>
          wrapper.appendChild(pre);                     // move <pre> inside wrapper
      
          /* copy button */
          const btn = document.createElement('button');
          btn.className  = 'copy-btn';
          btn.textContent = 'Copy';
          btn.addEventListener('click', () => {
            navigator.clipboard.writeText(code.innerText).then(() => {
              btn.textContent = 'Copied!';
              setTimeout(() => (btn.textContent = 'Copy'), 2000);
            });
          });
          wrapper.appendChild(btn);                     // sits outside the frame
        });
      });
      </script>
      
      
  </body>
</html>